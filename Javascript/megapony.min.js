function MegaponyObjects(){"use strict";var e=this;this.init=function(){e.checkForCollision()};this.checkForCollision=function(){$('[class*="megapony-object"]').each(function(){var t=$(this),n=t.attr("class").split(/\s+/),r="",i=0;for(i=0;i<n.length;i+=1){r=n[i].split("megapony-object-")[1];if(r!==undefined){if(r==="halign"||r==="valign-middle"){e.halign(t)}else if(r==="media"){e.media(t)}else if(r==="hnav"){e.hnav(t)}else if(r==="vnav"){e.vnav(t)}else if(r.indexOf("columns-")!==-1){e.columns(t)}}}})};this.halign=function(e){var t=0,n=e.width()-parseInt(e.css("padding-left"),10)-parseInt(e.css("padding-right"),10),r;if(e.hasClass("full-width")){return}e.children().each(function(){r=$(this);t+=r.width();t+=parseInt(r.css("margin-left"),10);t+=parseInt(r.css("margin-right"),10)});if(t>n){e.addClass("no-side-by-side");e.closest(".megapony-object-halign-container").addClass("children-no-side-by-side")}else if(t+50>n){e.addClass("nearly-no-side-by-side side-by-side");e.closest(".megapony-object-halign-container").addClass("children-nearly-no-side-by-side")}else{e.addClass("side-by-side")}};this.media=function(e){var t=e.find(".img").length?e.find(".img"):e.find(".video"),n=new Image,r=t.find("img").length?t.find("img").attr("src"):t.attr("src"),i=false,s=e.children(".bd"),o=s.css("min-width")!==undefined?parseInt(s.css("min-width"),10):0;if(t.hasClass("img")){n.onload=function(){i=e.width()<=0;if(!i&&e.width()<this.width+parseInt(t.css("margin-left"),10)+parseInt(t.css("margin-right"),10)+o){e.addClass("no-side-by-side")}t.css("max-width",this.width)};n.src=r}else{if(e.width()<t.width()+parseInt(t.css("margin-left"),10)+parseInt(t.css("margin-right"),10)+o){e.addClass("no-side-by-side")}}};this.hnav=function(e){var t=e.find("> ul"),n=0,r=document.ontouchstart!==null?"click":"touchstart",i;t.find("> li").each(function(){i=$(this);n+=i.width()+parseInt(i.css("margin-left"),10)+parseInt(i.css("margin-right"),10)});if(n>t.width()-parseInt(t.css("padding-left"),10)-parseInt(t.css("padding-right"),10)+3){e.addClass("breakpoint-small");e.closest(".megapony-object-hnav-container").addClass("hnav-breakpoint-small")}if(!e.hasClass("no-dropdown")){e.addClass("dropdown")}e.find(".toggle").bind(r,function(){t.toggle();$(this).toggleClass("open")})};this.vnav=function(e){e.find(".toggle").bind("click",function(){e.children("ul").toggle()})};this.columns=function(t){if(e.areColumnsStacked(t)){t.find("[data-move-down]").each(function(){var e=$(this),n=e.closest(".megapony-object-column").index()+1,r=n+parseInt(e.attr("data-move-down"),10);e.appendTo(t.children(":nth-child("+r+")"))});t.find("[data-move-up]").each(function(){var e=$(this),n=e.closest(".megapony-object-column").index()+1,r=n-parseInt(e.attr("data-move-up"),10);e.appendTo(t.children(":nth-child("+r+")"))})}};this.areColumnsStacked=function(e){return e.width()===e.children(".megapony-object-column").first().width()}}function ElementQueries(){"use strict";var e=this,t=new RegExp(/\.(megapony)\-(max|min)\-(width|height)\-(\d*)/g),n="megapony-max-width-",r="megapony-min-width-",i="megapony-max-height-",s="megapony-min-height-";this.init=function(){e.parseStylesheets()};this.parseStylesheets=function(){var t="",n,r,i="";e.getMegaponyStyleSheets(document.styleSheets).forEach(function(s){n=s.rules||s.cssRules;r=n.length;for(var o=0;o<r;o++){i=n[o].selectorText;t+=i+";"}e.checkSelectorsForElementQuery(t)})};this.getMegaponyStyleSheets=function(e){var t=[],n=e.length;for(var r=0;r<n;r++){if(e[r].title==="megapony"){t.push(e[r])}}return t};this.checkSelectorsForElementQuery=function(n){var r=n.split(";"),i=r.length,s="";for(var o=0;o<i;o++){s=r[o]!==undefined?r[o]:"";if(s.match(t)!==null){e.selectorContainsElementQueries(s)}}};this.selectorContainsElementQueries=function(t){var n=t.split(","),r=n.length,i="";for(var s=0;s<r;s++){if(i!==e.getTargetSelector(n[s])){e.applyElementQueries(document.querySelectorAll(e.getTargetSelector(n[s])),e.getWidthAndHeightFromSelector(t))}i=e.getTargetSelector(n[s])}};this.getWidthAndHeightFromSelector=function(t){return{maxW:e.getLengthFromSelector(n,t),minW:e.getLengthFromSelector(r,t),maxH:e.getLengthFromSelector(i,t),minH:e.getLengthFromSelector(s,t)}};this.getTargetSelector=function(e){var n=e.search(t);e=e.replace(t,"");if(e.indexOf(" ",n)!==-1){return e.substring(0,e.indexOf(" ",n))}else{return e}};this.getLengthFromSelector=function(e,t){var n=t.indexOf(e),r=parseInt(t.slice(n+e.length,n+e.length+4),10);return r>0?r:false};this.applyElementQueries=function(e,t){var o,u,a=e.length;if(a===0){return}for(var f=0;f<a;f++){o=e[f].offsetWidth;u=e[f].offsetHeight;if(t.maxW>0&&!t.minW&&o<t.maxW){e[f].classList.add(n+t.maxW)}if(t.minW>0&&!t.maxW&&o>=t.minW){e[f].classList.add(r+t.minW)}if(t.maxW>0&&t.minW>0&&o<t.maxW&&o>=t.minW){e[f].classList.add(n+t.maxW);e[f].classList.add(r+t.minW)}if(t.maxH>0&&!t.minH&&u<t.maxH){e[f].classList.add(i+t.maxH)}if(t.minH>0&&!t.maxH&&u>t.minH){e[f].classList.add(s+t.minH)}if(t.maxH>0&&t.minH>0&&u<t.maxH&&u>t.minH){e[f].classList.add(i+t.maxH);e[f].classList.add(s+t.minH)}}}}(function(){"use strict";$(document).ready(function(e){var t=new ElementQueries,n=new MegaponyObjects;t.init();n.init();document.querySelector("html").classList.remove("megapony-loading")})})()